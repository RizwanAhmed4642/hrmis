import { Component, OnInit, OnDestroy } from '@angular/core';
import { KGridHelper } from '../../_helpers/k-grid.class';
import { DropDownsHR } from '../../_helpers/dropdowns.class';
import { Subject } from 'rxjs/Subject';
import { RootService } from '../../_services/root.service';
import { ApplicationFtsService } from '../../modules/application-fts/application-fts.service';
import { AuthenticationService } from '../../_services/authentication.service';
import { debounceTime } from 'rxjs/operators/debounceTime';
import { PageChangeEvent } from '@progress/kendo-angular-grid';
import { FileTrackingSystemService } from '../file-tracking-system.service';
import { FileMoveMaster } from '../../modules/application-fts/application-fts';
import { DomSanitizer } from '@angular/platform-browser';
import { FirebaseHisduService } from '../../_services/firebase-hisdu.service';
import { Subscription } from 'rxjs/Subscription';
import { NotificationService } from '../../_services/notification.service';

@Component({
  selector: 'app-inbox',
  templateUrl: './inbox.component.html',
  styles: []
})
export class InboxComponent implements OnInit, OnDestroy {
  public kGrid: KGridHelper = new KGridHelper();
  public dropDowns: DropDownsHR = new DropDownsHR();
  public inputChange: Subject<any>;
  public dateNow: string = '';
  public searchQuery: string = '';
  public office_Id: number = 0;
  public officeName: number = 0;
  public recieveFiles: boolean = false;
  public generatingSlip: boolean = false;
  public savingFileMovement: boolean = false;
  public acknowledgeDialogOpened: boolean = false;
  public successDialogOpened: boolean = false;
  public shouldPrint: boolean = false;
  public fileMoveMaster: FileMoveMaster;
  public selectedApplications: any[] = [];
  public selectedApplicationsIds: number[] = [];
  public selectedAppIdsForMovement: number[] = [
    187165,
    187166,
    187168,
    187169,
    187183,
    187187,
    187189,
    187190,
    187192,
    187193,
    187195,
    187196,
    187197,
    187200,
    187201,
    187202,
    187203,
    187205,
    187207,
    187208,
    187209,
    187211,
    187212,
    187213,
    187215,
    187216,
    187217,
    187218,
    187219,
    187220,
    187221,
    187222,
    187223,
    187224,
    187225,
    187226,
    187227,
    187229,
    187230,
    187231,
    187232,
    187233,
    187234,
    187236,
    187237,
    187238,
    187240,
    187241,
    187242,
    187244,
    187245,
    187246,
    187250,
    187254,
    187257,
    187261,
    187262,
    187265,
    187266,
    187267,
    187270,
    187271,
    187279,
    187280,
    187282,
    187285,
    187286,
    187287,
    187290,
    187292,
    187293,
    187294,
    187295,
    187296,
    187298,
    187299,
    187301,
    187302,
    187303,
    187304,
    187307,
    187310,
    187316,
    187323,
    187328,
    187329,
    187330,
    187331,
    187334,
    187338,
    187339,
    187340,
    187342,
    187345,
    187347,
    187370,
    187372,
    187373,
    187389,
    187394,
    187395,
    187396,
    187397,
    187398,
    187400,
    187401,
    187402,
    187404,
    187405,
    187406,
    187407,
    187408,
    187409,
    187411,
    187412,
    187413,
    187414,
    187416,
    187419,
    187420,
    187421,
    187422,
    187423,
    187424,
    187425,
    187427,
    187429,
    187431,
    187432,
    187434,
    187436,
    187438,
    187441,
    187442,
    187443,
    187444,
    187446,
    187449,
    187451,
    187452,
    187454,
    187455,
    187456,
    187459,
    187460,
    187462,
    187463,
    187464,
    187466,
    187468,
    187470,
    187471,
    187472,
    187474,
    187475,
    187476,
    187477,
    187479,
    187480,
    187481,
    187482,
    187484,
    187485,
    187487,
    187488,
    187490,
    187491,
    187492,
    187493,
    187494,
    187496,
    187497,
    187498,
    187499,
    187500,
    187501,
    187502,
    187503,
    187504,
    187505,
    187506,
    187507,
    187508,
    187509,
    187511,
    187512,
    187514,
    187515,
    187516,
    187518,
    187519,
    187520,
    187521,
    187522,
    187523,
    187525,
    187526,
    187527,
    187530,
    187532,
    187533,
    187534,
    187535,
    187536,
    187537,
    187538,
    187539,
    187540,
    187542,
    187543,
    187544,
    187545,
    187546,
    187547,
    187548,
    187549,
    187550,
    187551,
    187552,
    187553,
    187554,
    187555,
    187556,
    187557,
    187558,
    187559,
    187560,
    187561,
    187562,
    187563,
    187564,
    187565,
    187567,
    187568,
    187569,
    187570,
    187571,
    187573,
    187574,
    187576,
    187577,
    187578,
    187579,
    187580,
    187582,
    187583,
    187585,
    187586,
    187587,
    187588,
    187589,
    187590,
    187591,
    187592,
    187593,
    187594,
    187595,
    187596,
    187597,
    187598,
    187599,
    187600,
    187601,
    187602,
    187603,
    187604,
    187605,
    187606,
    187607,
    187608,
    187609,
    187610,
    187612,
    187613,
    187614,
    187615,
    187617,
    187618,
    187619,
    187620,
    187621,
    187622,
    187624,
    187625,
    187626,
    187627,
    187628,
    187629,
    187630,
    187632,
    187633,
    187634,
    187635,
    187636,
    187637,
    187638,
    187639,
    187640,
    187641,
    187642,
    187643,
    187644,
    187645,
    187646,
    187647,
    187650,
    187651,
    187652,
    187658,
    187660,
    187662,
    187663,
    187668,
    187669,
    187670,
    187673,
    187674,
    187676,
    187678,
    187686,
    187690,
    187693,
    187694,
    187697,
    187698,
    187701,
    187703,
    187708,
    187710,
    187712,
    187713,
    187714,
    187715,
    187716,
    187721,
    187724,
    187727,
    187732,
    187734,
    187735,
    187736,
    187741,
    187742,
    187743,
    187746,
    187755,
    187760,
    187761,
    187762,
    187763,
    187764,
    187765,
    187766,
    187767,
    187768,
    187769,
    187770,
    187771,
    187772,
    187773,
    187774,
    187775,
    187776,
    187777,
    187778,
    187779,
    187780,
    187781,
    187782,
    187783,
    187784,
    187785,
    187786,
    187787,
    187788,
    187789,
    187791,
    187792,
    187793,
    187794,
    187795,
    187796,
    187797,
    187798,
    187799,
    187801,
    187804,
    187806,
    187809,
    187811,
    187813,
    187814,
    187819,
    187820,
    187821,
    187823,
    187824,
    187825,
    187826,
    187827,
    187828,
    187830,
    187831,
    187833,
    187835,
    187836,
    187838,
    187839,
    187840,
    187848,
    187849,
    187850,
    187853,
    187855,
    187862,
    187864,
    187865,
    187866,
    187867,
    187868,
    187869,
    187870,
    187871,
    187872,
    187873,
    187874,
    187875,
    187876,
    187877,
    187878,
    187879,
    187880,
    187882,
    187883,
    187884,
    187888,
    187890,
    187891,
    187892,
    187893,
    187898,
    187899,
    187900,
    187902,
    187904,
    187905,
    187906,
    187907,
    187908,
    187909,
    187910,
    187911,
    187913,
    187915,
    187916,
    187917,
    187918,
    187919,
    187920,
    187921,
    187922,
    187923,
    187925,
    187927,
    187928,
    187929,
    187930,
    187931,
    187932,
    187933,
    187934,
    187935,
    187936,
    187937,
    187938,
    187939,
    187940,
    187941,
    187942,
    187944,
    187945,
    187946,
    187947,
    187948,
    187950,
    187951,
    187952,
    187953,
    187954,
    187955,
    187956,
    187957,
    187959,
    187960,
    187962,
    187964,
    187965,
    187966,
    187967,
    187968,
    187969,
    187970,
    187971,
    187972,
    187973,
    187974,
    187976,
    187978,
    187979,
    187982,
    187983,
    187984,
    187989,
    187990,
    187991,
    187992,
    187993,
    188000,
    188002,
    188003,
    188005,
    188009,
    188010,
    188011,
    188012,
    188016,
    188023,
    188027,
    188029,
    188032,
    188033,
    188035,
    188037,
    188038,
    188039,
    188041,
    188042,
    188050,
    188053,
    188055,
    188057,
    188058,
    188059,
    188060,
    188062,
    188071,
    188076,
    188078,
    188079,
    188081,
    188082,
    188083,
    188084,
    188085,
    188086,
    188087,
    188088,
    188089,
    188090,
    188091,
    188092,
    188093,
    188094,
    188095,
    188096,
    188097,
    188098,
    188099,
    188100,
    188101,
    188102,
    188104,
    188105,
    188110,
    188111,
    188115,
    188117,
    188118,
    188119,
    188121,
    188122,
    188123,
    188124,
    188125,
    188126,
    188127,
    188128,
    188129,
    188132,
    188133,
    188134,
    188135,
    188136,
    188137,
    188138,
    188139,
    188140,
    188141,
    188142,
    188143,
    188145,
    188147,
    188148,
    188149,
    188150,
    188151,
    188152,
    188153,
    188154,
    188155,
    188156,
    188157,
    188159,
    188161,
    188162,
    188163,
    188164,
    188165,
    188167,
    188168,
    188171,
    188172,
    188174,
    188175,
    188176,
    188180,
    188181,
    188182,
    188183,
    188184,
    188185,
    188189,
    188190,
    188196,
    188197,
    188210,
    188211,
    188212,
    188214,
    188215,
    188216,
    188218,
    188219,
    188220,
    188221,
    188222,
    188223,
    188224,
    188225,
    188226,
    188227,
    188228,
    188229,
    188230,
    188231,
    188232,
    188233,
    188234,
    188235,
    188236,
    188238,
    188239,
    188240,
    188245,
    188248,
    188258,
    188259,
    188260,
    188261,
    188263,
    188264,
    188266,
    188267,
    188268,
    188271,
    188276,
    188278,
    188279,
    188281,
    188282,
    188283,
    188284,
    188285,
    188286,
    188287,
    188288,
    188289,
    188290,
    188291,
    188292,
    188294,
    188295,
    188300,
    188323,
    188325,
    188326,
    188327,
    188329,
    188335,
    188339,
    188352,
    188357,
    188362,
    188364,
    188366,
    188368,
    188369,
    188370,
    188371,
    188372,
    188374,
    188376,
    188378,
    188379,
    188380,
    188382,
    188383,
    188384,
    188385,
    188386,
    188387,
    188389,
    188391,
    188392,
    188393,
    188394,
    188395,
    188396,
    188397,
    188398,
    188399,
    188400,
    188401,
    188402,
    188403,
    188406,
    188409,
    188412,
    188413,
    188414,
    188416,
    188419,
    188424,
    188426,
    188427,
    188428,
    188429,
    188430,
    188431,
    188432,
    188433,
    188434,
    188435,
    188436,
    188437,
    188438,
    188439,
    188440,
    188441,
    188442,
    188443,
    188444,
    188445,
    188446,
    188447,
    188448,
    188449,
    188450,
    188452,
    188453,
    188454,
    188455,
    188456,
    188458,
    188459,
    188461,
    188462,
    188463,
    188464,
    188465,
    188467,
    188469,
    188470,
    188472,
    188473,
    188474,
    188475,
    188476,
    188477,
    188479,
    188481,
    188482,
    188483,
    188484,
    188485,
    188487,
    188491,
    188492,
    188493,
    188494,
    188495,
    188497,
    188498,
    188499,
    188500,
    188502,
    188504,
    188506,
    188511,
    188516,
    188521,
    188522,
    188524,
    188525,
    188526,
    188529,
    188531,
    188534,
    188536,
    188538,
    188542,
    188545,
    188547,
    188548,
    188549,
    188552,
    188554,
    188561,
    188567,
    188598,
    188601,
    188613,
    188614,
    188615,
    188616,
    188617,
    188618,
    188620,
    188621,
    188622,
    188623,
    188624,
    188629,
    188633,
    188635,
    188636,
    188637,
    188638,
    188639,
    188640,
    188641,
    188642,
    188645,
    188646,
    188647,
    188648,
    188650,
    188651,
    188652,
    188653,
    188654,
    188655,
    188656,
    188658,
    188659,
    188661,
    188663,
    188665,
    188668,
    188669,
    188670,
    188671,
    188672,
    188673,
    188675,
    188676,
    188678,
    188680,
    188681,
    188682,
    188684,
    188685,
    188687,
    188688,
    188689,
    188690,
    188691,
    188694,
    188697,
    188700,
    188701,
    188702,
    188703,
    188706,
    188711,
    188713,
    188715,
    188716,
    188717,
    188718,
    188720,
    188723,
    188724,
    188725,
    188726,
    188730,
    188731,
    188732,
    188733,
    188734,
    188735,
    188736,
    188737,
    188738,
    188739,
    188740,
    188742,
    188743,
    188744,
    188746,
    188750,
    188763,
    188767,
    188772,
    188773,
    188775,
    188779,
    188780,
    188782,
    188786,
    188790,
    188794,
    188802,
    188804,
    188806,
    188815,
    188819,
    188820,
    188821,
    188822,
    188824,
    188832,
    188833,
    188836,
    188840,
    188841,
    188844,
    188846,
    188847,
    188848,
    188849,
    188850,
    188851,
    188853,
    188855,
    188858,
    188859,
    188860,
    188861,
    188865,
    188872,
    188875,
    188876,
    188877,
    188878,
    188879,
    188880,
    188881,
    188882,
    188883,
    188884,
    188885,
    188886,
    188887,
    188888,
    188889,
    188890,
    188891,
    188892,
    188893,
    188894,
    188895,
    188896,
    188897,
    188898,
    188899,
    188902,
    188903,
    188904,
    188905,
    188906,
    188907,
    188908,
    188909,
    188910,
    188911,
    188912,
    188913,
    188914,
    188915,
    188916,
    188917,
    188918,
    188919,
    188920,
    188922,
    188928,
    188936,
    188938,
    188939,
    188943,
    188944,
    188945,
    188946,
    188947,
    188948,
    188949,
    188950,
    188952,
    188953,
    188955,
    188956,
    188960,
    188961,
    188962,
    188963,
    188964,
    188965,
    188966,
    188967,
    188968,
    188969,
    188970,
    188972,
    188973,
    188975,
    188976,
    188977,
    188978,
    188979,
    188980,
    188981,
    188982,
    188983,
    188984,
    188985,
    188986,
    188987,
    188988,
    188989,
    188991,
    188992,
    188993,
    188994,
    188995,
    188996,
    188997,
    188998,
    189000,
    189001,
    189002,
    189003,
    189004,
    189005,
    189006,
    189008,
    189013,
    189014,
    189016,
    189017,
    189021,
    189023,
    189027,
    189028,
    189029,
    189034,
    189035,
    189036,
    189038,
    189042,
    189043,
    189044,
    189046,
    189052,
    189055,
    189057,
    189066,
    189072,
    189074,
    189075,
    189076,
    189078,
    189079,
    189080,
    189082,
    189083,
    189084,
    189085,
    189086,
    189088,
    189089,
    189090,
    189091,
    189092,
    189093,
    189094,
    189095,
    189096,
    189097,
    189098,
    189099,
    189100,
    189102,
    189103,
    189104,
    189105,
    189106,
    189108,
    189109,
    189112,
    189117,
    189121,
    189123,
    189124,
    189125,
    189127,
    189128,
    189129,
    189130,
    189131,
    189132,
    189133,
    189134,
    189136,
    189139,
    189145,
    189148,
    189154,
    189155,
    189156,
    189160,
    189162,
    189163,
    189164,
    189165,
    189168,
    189171,
    189172,
    189174,
    189178,
    189182,
    189187,
    189189,
    189190,
    189192,
    189198,
    189202,
    189204,
    189205,
    189207,
    189210,
    189211,
    189213,
    189216,
    189228,
    189230,
    189233,
    189235,
    189236,
    189237,
    189238,
    189239,
    189240,
    189244,
    189245,
    189246,
    189247,
    189251,
    189252,
    189253,
    189254,
    189255,
    189257,
    189258,
    189259,
    189261,
    189262,
    189263,
    189264,
    189266,
    189267,
    189268,
    189269,
    189270,
    189271,
    189272,
    189273,
    189274,
    189275,
    189276,
    189277,
    189278,
    189281,
    189282,
    189284,
    189288,
    189289,
    189290,
    189291,
    189292,
    189293,
    189294,
    189295,
    189296,
    189297,
    189298,
    189299,
    189300,
    189301,
    189302,
    189305,
    189309,
    189311,
    189312,
    189314,
    189316,
    189317,
    189319,
    189320,
    189321,
    189322,
    189323,
    189324,
    189326,
    189328,
    189329,
    189332,
    189333,
    189334,
    189336,
    189337,
    189342,
    189343,
    189344,
    189345,
    189346,
    189347,
    189348,
    189349,
    189350,
    189351,
    189356,
    189357,
    189358,
    189360,
    189361,
    189364,
    189365,
    189366,
    189372,
    189373,
    189374,
    189375,
    189378,
    189379,
    189385,
    189387,
    189389,
    189392,
    189393,
    189395,
    189396,
    189397,
    189398,
    189399,
    189400,
    189402,
    189403,
    189404,
    189406,
    189407,
    189414,
    189415,
    189419,
    189420,
    189421,
    189423,
    189430,
    189433,
    189434,
    189438,
    189440,
    189441,
    189445,
    189450,
    189453,
    189458,
    189460,
    189462,
    189465,
    189467,
    189468,
    189474,
    189477,
    189482,
    189485,
    189486,
    189487,
    189488,
    189489,
    189490,
    189491,
    189492,
    189493,
    189494,
    189495,
    189496,
    189497,
    189498,
    189499,
    189500,
    189501,
    189502,
    189503,
    189504,
    189505,
    189506,
    189507,
    189508,
    189509,
    189511,
    189512,
    189513,
    189515,
    189517,
    189518,
    189519,
    189520,
    189521,
    189522,
    189523,
    189524,
    189525,
    189526,
    189528,
    189529,
    189530,
    189531,
    189533,
    189534,
    189535,
    189536,
    189537,
    189539,
    189540,
    189541,
    189542,
    189543,
    189544,
    189545,
    189546,
    189547,
    189548,
    189549,
    189550,
    189551,
    189552,
    189553,
    189555,
    189556,
    189557,
    189558,
    189559,
    189560,
    189561,
    189562,
    189563,
    189565,
    189567,
    189568,
    189570,
    189572,
    189573,
    189574,
    189575,
    189576,
    189577,
    189579,
    189582,
    189584,
    189588,
    189593,
    189594,
    189595,
    189596,
    189597,
    189598,
    189600,
    189601,
    189602,
    189611,
    189612,
    189615,
    189616,
    189620,
    189621,
    189622,
    189626,
    189627,
    189628,
    189632,
    189635,
    189638,
    189640,
    189644,
    189647,
    189648,
    189649,
    189650,
    189652,
    189653,
    189654,
    189655,
    189656,
    189657,
    189658,
    189659,
    189660,
    189661,
    189662,
    189663,
    189665,
    189671,
    189672,
    189673,
    189674,
    189675,
    189676,
    189677,
    189678,
    189679,
    189681,
    189682,
    189684,
    189685,
    189686,
    189687,
    189688,
    189689,
    189690,
    189691,
    189692,
    189693,
    189694,
    189695,
    189696,
    189697,
    189698,
    189699,
    189700,
    189701,
    189702,
    189703,
    189704,
    189705,
    189706,
    189708,
    189709,
    189711,
    189712,
    189713,
    189714,
    189716,
    189717,
    189718,
    189719,
    189720,
    189722,
    189723,
    189724,
    189725,
    189726,
    189729,
    189730,
    189731,
    189734,
    189735,
    189741,
    189742,
    189743,
    189744,
    189745,
    189746,
    189747,
    189748,
    189749,
    189750,
    189751,
    189752,
    189753,
    189754,
    189755,
    189756,
    189757,
    189758,
    189759,
    189760,
    189761,
    189762,
    189763,
    189764,
    189765,
    189766,
    189767,
    189768,
    189769,
    189771,
    189772,
    189773,
    189774,
    189775,
    189776,
    189777,
    189778,
    189780,
    189782,
    189784,
    189785,
    189786,
    189787,
    189788,
    189789,
    189791,
    189792,
    189793,
    189794,
    189795,
    189796,
    189797,
    189798,
    189799,
    189800,
    189801,
    189802,
    189803,
    189804,
    189805,
    189806,
    189807,
    189808,
    189809,
    189810,
    189811,
    189812,
    189813,
    189814,
    189815,
    189816,
    189817,
    189818,
    189819,
    189820,
    189821,
    189822,
    189823,
    189825,
    189828,
    189831,
    189833,
    189835,
    189836,
    189837,
    189838,
    189839,
    189840,
    189842,
    189843,
    189844,
    189845,
    189846,
    189847,
    189848,
    189849,
    189850,
    189853,
    189854,
    189855,
    189856,
    189879,
    189889,
    189893,
    189901,
    189902,
    189903,
    189904,
    189905,
    189906,
    189907,
    189908,
    189909,
    189910,
    189911,
    189912,
    189913,
    189914,
    189915,
    189916,
    189918,
    189919,
    189920,
    189921,
    189922,
    189925,
    189927,
    189934,
    189937,
    189941,
    189946,
    189949,
    189953,
    189955,
    189956,
    189958,
    189964,
    189973,
    189975,
    189978,
    189982,
    189989,
    189990,
    189991,
    189992,
    189993,
    189994,
    189995,
    189996,
    189997,
    189998,
    190001,
    190004,
    190006,
    190007,
    190009,
    190010,
    190011,
    190012,
    190014,
    190015,
    190016,
    190017,
    190019,
    190022,
    190024,
    190025,
    190026,
    190027,
    190029,
    190030,
    190031,
    190032,
    190035,
    190041,
    190042,
    190043,
    190045,
    190046,
    190047,
    190049,
    190050,
    190051,
    190053,
    190054,
    190055,
    190056,
    190059,
    190063,
    190065,
    190067,
    190070,
    190071,
    190074,
    190075,
    190076,
    190077,
    190078,
    190079,
    190080,
    190081,
    190082,
    190083,
    190084,
    190085,
    190086,
    190087,
    190088,
    190089,
    190090,
    190092,
    190093,
    190094,
    190095,
    190096,
    190097,
    190098,
    190099,
    190100,
    190101,
    190102,
    190103,
    190104,
    190110,
    190115,
    190117,
    190120,
    190121,
    190123,
    190126,
    190127,
    190128,
    190129,
    190131,
    190132,
    190134,
    190135,
    190139,
    190141,
    190142,
    190144,
    190147,
    190148,
    190152,
    190159,
    190160,
    190162,
    190163,
    190164,
    190165,
    190173,
    190182,
    190189,
    190190,
    190191,
    190192,
    190193,
    190194,
    190195,
    190196,
    190197,
    190198,
    190199,
    190200,
    190201,
    190202,
    190203,
    190204,
    190205,
    190206,
    190207,
    190208,
    190209,
    190210,
    190211,
    190212,
    190213,
    190214,
    190215,
    190216,
    190217,
    190219,
    190220,
    190221,
    190223,
    190224,
    190225,
    190226,
    190227,
    190229,
    190231,
    190232,
    190233,
    190235,
    190236,
    190237,
    190240,
    190243,
    190244,
    190245,
    190246,
    190247,
    190248,
    190249,
    190250,
    190253,
    190254,
    190256,
    190257,
    190258,
    190265,
    190266,
    190267,
    190268,
    190269,
    190271,
    190272,
    190273,
    190275,
    190277,
    190278,
    190279,
    190280,
    190282,
    190283,
    190284,
    190285,
    190286,
    190287,
    190289,
    190290,
    190291,
    190292,
    190293,
    190294,
    190295,
    190296,
    190297,
    190299,
    190300,
    190301,
    190303,
    190305,
    190309,
    190310,
    190311,
    190312,
    190313,
    190314,
    190315,
    190316,
    190317,
    190319,
    190321,
    190322,
    190323,
    190324,
    190325,
    190326,
    190327,
    190328,
    190329,
    190330,
    190331,
    190332,
    190333,
    190334,
    190335,
    190336,
    190337,
    190338,
    190340,
    190342,
    190344,
    190347,
    190350,
    190357,
    190358,
    190361,
    190362,
    190363,
    190365,
    190368,
    190369,
    190370,
    190371,
    190372,
    190373,
    190374,
    190376,
    190377,
    190381,
    190386,
    190388,
    190389,
    190390,
    190394,
    190396,
    190398,
    190401,
    190403,
    190404,
    190405,
    190414,
    190427,
    190429,
    190430,
    190431,
    190432,
    190434,
    190435,
    190436,
    190437,
    190438,
    190439,
    190441,
    190442,
    190444,
    190446,
    190447,
    190448,
    190449,
    190451,
    190452,
    190453,
    190454,
    190455,
    190456,
    190459,
    190461,
    190462,
    190464,
    190465,
    190466,
    190469,
    190470,
    190471,
    190473,
    190486,
    190489,
    190490,
    190491,
    190493,
    190494,
    190497,
    190499,
    190500,
    190501,
    190504,
    190506,
    190507,
    190508,
    190511,
    190512,
    190513,
    190514,
    190515,
    190516,
    190517,
    190518,
    190519,
    190520,
    190521,
    190522,
    190523,
    190524,
    190525,
    190526,
    190527,
    190528,
    190530,
    190531,
    190532,
    190533,
    190536,
    190537,
    190538,
    190540,
    190541,
    190542,
    190543,
    190544,
    190545,
    190546,
    190549,
    190552,
    190555,
    190558,
    190559,
    190561,
    190563,
    190564,
    190565,
    190566,
    190567,
    190568,
    190569,
    190572,
    190574,
    190575,
    190576,
    190583,
    190585,
    190588,
    190590,
    190594,
    190596,
    190598,
    190602,
    190609,
    190614,
    190615,
    190617,
    190619,
    190621,
    190622,
    190632,
    190646,
    190651,
    190655,
    190663,
    190673,
    190675,
    190676,
    190677,
    190678,
    190679,
    190680,
    190681,
    190682,
    190683,
    190684,
    190685,
    190686,
    190687,
    190689,
    190690,
    190691,
    190692,
    190693,
    190694,
    190695,
    190696,
    190697,
    190698,
    190699,
    190700,
    190701,
    190702,
    190703,
    190704,
    190705,
    190707,
    190708,
    190709,
    190710,
    190711,
    190712,
    190713,
    190714,
    190715,
    190716,
    190717,
    190718,
    190719,
    190720,
    190722,
    190726,
    190731,
    190732,
    190734,
    190735,
    190736,
    190737,
    190738,
    190740,
    190741,
    190742,
    190743,
    190744,
    190745,
    190746,
    190748,
    190749,
    190750,
    190751,
    190752,
    190754,
    190756,
    190759,
    190760,
    190766,
    190767,
    190768,
    190769,
    190770,
    190771,
    190772,
    190774,
    190775,
    190776,
    190777,
    190778,
    190779,
    190780,
    190781,
    190782,
    190783,
    190784,
    190786,
    190787,
    190788,
    190789,
    190790,
    190791,
    190792,
    190793,
    190794,
    190795,
    190796,
    190797,
    190798,
    190799,
    190800,
    190801,
    190802,
    190803,
    190804,
    190805,
    190806,
    190807,
    190808,
    190809,
    190810,
    190811,
    190812,
    190813,
    190814,
    190816,
    190817,
    190818,
    190819,
    190826,
    190827,
    190832,
    190834,
    190835,
    190836,
    190838,
    190839,
    190840,
    190841,
    190842,
    190843,
    190844,
    190845,
    190846,
    190847,
    190848,
    190849,
    190850,
    190851,
    190854,
    190857,
    190858,
    190859,
    190860,
    190861,
    190862,
    190863,
    190864,
    190865,
    190866,
    190867,
    190869,
    190870,
    190871,
    190872,
    190873,
    190875,
    190876,
    190877,
    190879,
    190880,
    190881,
    190886,
    190888,
    190889,
    190890,
    190891,
    190895,
    190902,
    190905,
    190906,
    190907,
    190908,
    190910,
    190911,
    190912,
    190913,
    190914,
    190915,
    190916,
    190917,
    190918,
    190922,
    190924,
    190927,
    190928,
    190930,
    190938,
    190944,
    190946,
    190949,
    190950,
    190961,
    190963,
    190964,
    190965,
    190966,
    190967,
    190968,
    190969,
    190970,
    190971,
    190972,
    190973,
    190974,
    190975,
    190976,
    190977,
    190978,
    190979,
    190980,
    190981,
    190982,
    190983,
    190984,
    190985,
    190986,
    190987,
    190988,
    190989,
    190990,
    190991,
    190992,
    190994,
    190996,
    190997,
    191000,
    191001,
    191002,
    191003,
    191004,
    191006,
    191008,
    191009,
    191010,
    191011,
    191013,
    191014,
    191015,
    191016,
    191018,
    191020,
    191022,
    191023,
    191024,
    191025,
    191026,
    191027,
    191028,
    191029,
    191030,
    191032,
    191033,
    191034,
    191035,
    191036,
    191037,
    191038,
    191040,
    191041,
    191042,
    191044,
    191045,
    191046,
    191048,
    191049,
    191050,
    191051,
    191052,
    191053,
    191054,
    191055,
    191056,
    191057,
    191058,
    191060,
    191061,
    191062,
    191063,
    191064,
    191065,
    191066,
    191067,
    191069,
    191071,
    191072,
    191073,
    191074,
    191078,
    191079,
    191080,
    191081,
    191082,
    191083,
    191085,
    191086,
    191090,
    191091,
    191094,
    191095,
    191096,
    191097,
    191098,
    191101,
    191107,
    191109,
    191111,
    191112,
    191113,
    191114,
    191116,
    191129,
    191130,
    191132,
    191134,
    191135,
    191136,
    191137,
    191138,
    191139,
    191140,
    191141,
    191143,
    191144,
    191145,
    191146,
    191147,
    191148,
    191149,
    191150,
    191151,
    191152,
    191153,
    191156,
    191161,
    191163,
    191165,
    191167,
    191168,
    191170,
    191171,
    191172,
    191173,
    191174,
    191175,
    191176,
    191177,
    191178,
    191180,
    191181,
    191182,
    191183,
    191188,
    191195,
    191196,
    191199,
    191204,
    191209,
    191213,
    191214,
    191216,
    191218,
    191235,
    191236,
    191237,
    191238,
    191239,
    191240,
    191242,
    191243,
    191244,
    191246,
    191248,
    191249,
    191251,
    191252,
    191253,
    191254,
    191255,
    191256,
    191257,
    191258,
    191259,
    191260,
    191261,
    191262,
    191263,
    191264,
    191265,
    191266,
    191267,
    191269,
    191270,
    191272,
    191273,
    191274,
    191276,
    191277,
    191279,
    191280,
    191281,
    191282,
    191283,
    191284,
    191285,
    191288,
    191298,
    191299,
    191301,
    191303,
    191304,
    191306,
    191307,
    191308,
    191309,
    191310,
    191311,
    191312,
    191313,
    191314,
    191315,
    191316,
    191317,
    191318,
    191319,
    191320,
    191321,
    191322,
    191323,
    191324,
    191327,
    191330,
    191331,
    191332,
    191333,
    191334,
    191335,
    191336,
    191338,
    191339,
    191340,
    191341,
    191343,
    191344,
    191345,
    191346,
    191347,
    191348,
    191350,
    191351,
    191362,
    191363,
    191365,
    191367,
    191368,
    191369,
    191370,
    191372,
    191373,
    191374,
    191375,
    191376,
    191377,
    191378,
    191379,
    191382,
    191384,
    191386,
    191387,
    191390,
    191392,
    191394,
    191396,
    191398,
    191400,
    191402,
    191404,
    191405,
    191406,
    191408,
    191411,
    191416,
    191418,
    191419,
    191423,
    191424,
    191426,
    191428,
    191431,
    191435,
    191437,
    191442,
    191443,
    191447,
    191449,
    191450,
    191452,
    191453,
    191454,
    191455,
    191461,
    191463,
    191478,
    191479,
    191481,
    191482,
    191483,
    191484,
    191488,
    191489,
    191490,
    191491,
    191494,
    191495,
    191496,
    191497,
    191508,
    191509,
    191510,
    191511,
    191513,
    191514,
    191516,
    191517,
    191518,
    191520,
    191521,
    191522,
    191523,
    191524,
    191525,
    191526,
    191527,
    191528,
    191529,
    191530,
    191531,
    191532,
    191533,
    191534,
    191535,
    191536,
    191538,
    191539,
    191540,
    191548,
    191549,
    191550,
    191552,
    191553,
    191554,
    191555,
    191556,
    191557,
    191558,
    191559,
    191560,
    191561,
    191562,
    191563,
    191564,
    191565,
    191566,
    191569,
    191570,
    191571,
    191573,
    191574,
    191577,
    191578,
    191580,
    191582,
    191584,
    191587,
    191595,
    191596,
    191600,
    191603,
    191605,
    191610,
    191612,
    191613,
    191616,
    191617,
    191619,
    191625,
    191627,
    191628,
    191631,
    191634,
    191638,
    191646,
    191654,
    191656,
    191657,
    191658,
    191659,
    191667,
    191668,
    191669,
    191671,
    191672,
    191673,
    191674,
    191676,
    191677,
    191678,
    191679,
    191684,
    191686,
    191687,
    191688,
    191689,
    191691,
    191695,
    191696,
    191698,
    191700,
    191708,
    191710,
    191712,
    191714,
    191716,
    191718,
    191719,
    191720,
    191721,
    191722,
    191723,
    191724,
    191726,
    191727,
    191728,
    191729,
    191732,
    191734,
    191739,
    191743,
    191744,
    191745,
    191746,
    191747,
    191748,
    191749,
    191750,
    191751,
    191752,
    191753,
    191754,
    191755,
    191756,
    191757,
    191758,
    191759,
    191760,
    191761,
    191762,
    191763,
    191764,
    191766,
    191767,
    191768,
    191769,
    191771,
    191773,
    191774,
    191775,
    191777,
    191778,
    191779,
    191780,
    191781,
    191782,
    191784,
    191785,
    191786,
    191787,
    191788,
    191789,
    191790,
    191791,
    191792,
    191793,
    191794,
    191796,
    191797,
    191800,
    191803,
    191806,
    191807,
    191808,
    191811,
    191816,
    191818,
    191820,
    191822,
    191823,
    191825,
    191829,
    191830,
    191832,
    191834,
    191835,
    191836,
    191839,
    191843,
    191845,
    191846,
    191849,
    191852,
    191855,
    191857,
    191860,
    191861,
    191864,
    191867,
    191868,
    191871,
    191874,
    191875,
    191877,
    191879,
    191883,
    191884,
    191887,
    191888,
    191890,
    191893,
    191894,
    191899,
    191905,
    191908,
    191924,
    191927,
    191936,
    191940,
    191941,
    191942,
    191944,
    191945,
    191946,
    191947,
    191949,
    191951,
    191952,
    191954,
    191955,
    191956,
    191957,
    191958,
    191959,
    191960,
    191963,
    191964,
    191965,
    191966,
    191967,
    191968,
    191969,
    191970,
    191971,
    191975,
    191976,
    191977,
    191978,
    191979,
    191980,
    191981,
    191982,
    191983,
    191984,
    191985,
    191986,
    191987,
    191988,
    191989,
    191990,
    191991,
    191992,
    191993,
    191994,
    191995,
    191996,
    191997,
    191998,
    191999,
    192000,
    192001,
    192002,
    192004,
    192005,
    192007,
    192008,
    192009,
    192011,
    192012,
    192013,
    192014,
    192015,
    192016,
    192017,
    192018,
    192019,
    192020,
    192021,
    192022,
    192023,
    192024,
    192025,
    192026,
    192027,
    192028,
    192029,
    192030,
    192031,
    192033,
    192034,
    192036,
    192038,
    192039,
    192045,
    192046,
    192048,
    192051,
    192054,
    192056,
    192058,
    192059,
    192061,
    192063,
    192069,
    192071,
    192074,
    192076,
    192078,
    192081,
    192083,
    192086,
    192092,
    192094,
    192095,
    192096,
    192097,
    192098,
    192099,
    192100,
    192101,
    192102,
    192103,
    192105,
    192106,
    192109,
    192111,
    192116,
    192118,
    192119,
    192120,
    192121,
    192122,
    192124,
    192126,
    192128,
    192129,
    192135,
    192137,
    192138,
    192139,
    192147,
    192150,
    192156,
    192157,
    192158,
    192159,
    192160,
    192161,
    192163,
    192164,
    192166,
    192167,
    192168,
    192169,
    192171,
    192173,
    192174,
    192177,
    192178,
    192183,
    192185,
    192186,
    192187,
    192188,
    192190,
    192191,
    192192,
    192193,
    192195,
    192196,
    192198,
    192199,
    192200,
    192201,
    192203,
    192204,
    192205,
    192207,
    192208,
    192209,
    192210,
    192211,
    192212,
    192213,
    192214,
    192217,
    192221,
    192223,
    192224,
    192225,
    192226,
    192227,
    192228,
    192229,
    192230,
    192231,
    192232,
    192233,
    192239,
    192240,
    192241,
    192242,
    192244,
    192245,
    192246,
    192247,
    192248,
    192258,
    192259,
    192262,
    192267,
    192268,
    192270,
    192271,
    192273,
    192274,
    192277,
    192278,
    192279,
    192282,
    192283,
    192284,
    192301,
    192302,
    192304,
    192305,
    192306,
    192307,
    192308,
    192309,
    192310,
    192311,
    192315,
    192316,
    192319,
    192320,
    192323,
    192326,
    192327,
    192329,
    192330,
    192332,
    192338,
    192341,
    192342,
    192343,
    192344,
    192348,
    192350,
    192351,
    192353,
    192354,
    192355,
    192357,
    192359,
    192360,
    192361,
    192362,
    192363,
    192365,
    192366,
    192367,
    192368,
    192370,
    192371,
    192373,
    192374,
    192376,
    192377,
    192378,
    192379,
    192380,
    192382,
    192383,
    192384,
    192385,
    192392,
    192395,
    192396,
    192398,
    192401,
    192403,
    192407,
    192409,
    192410,
    192413,
    192418,
    192422,
    192423,
    192425,
    192426,
    192427,
    192428,
    192430,
    192431,
    192432,
    192433,
    192434,
    192435,
    192436,
    192437,
    192439,
    192441,
    192445,
    192448,
    192455,
    192458,
    192459,
    192462,
    192463,
    192464,
    192465,
    192466,
    192467,
    192468,
    192469,
    192470,
    192472,
    192473,
    192474,
    192475,
    192476,
    192477,
    192478,
    192479,
    192480,
    192481,
    192482,
    192483,
    192485,
    192486,
    192487,
    192488,
    192489,
    192490,
    192492,
    192493,
    192495,
    192496,
    192498,
    192499,
    192500,
    192503,
    192506,
    192507,
    192508,
    192509,
    192511,
    192514,
    192515,
    192518,
    192521,
    192528,
    192529,
    192530,
    192531,
    192532,
    192534,
    192538,
    192541,
    192545,
    192546,
    192547,
    192550,
    192553,
    192560,
    192562,
    192570,
    192572,
    192574,
    192578,
    192581,
    192585,
    192587,
    192591,
    192592,
    192595,
    192597,
    192598,
    192601,
    192602,
    192603,
    192604,
    192605,
    192606,
    192608,
    192609,
    192613,
    192614,
    192616,
    192619,
    192620,
    192622,
    192625,
    192627,
    192628,
    192629,
    192632,
    192633,
    192635,
    192637,
    192639,
    192640,
    192641,
    192642,
    192643,
    192644,
    192645,
    192646,
    192647,
    192648,
    192649,
    192650,
    192651,
    192652,
    192654,
    192655,
    192656,
    192657,
    192658,
    192659,
    192660,
    192661,
    192662,
    192663,
    192664,
    192665,
    192666,
    192667,
    192668,
    192669,
    192671,
    192672,
    192673,
    192674,
    192675,
    192676,
    192677,
    192678,
    192679,
    192680,
    192681,
    192682,
    192683,
    192684,
    192685,
    192686,
    192687,
    192688,
    192689,
    192690,
    192691,
    192692,
    192694,
    192695,
    192696,
    192697,
    192698,
    192699,
    192700,
    192702,
    192715,
    192722,
    192723,
    192724,
    192725,
    192729,
    192730,
    192731,
    192732,
    192733,
    192735,
    192736,
    192737,
    192740,
    192743,
    192744,
    192747,
    192749,
    192750,
    192751,
    192752,
    192754,
    192757,
    192758,
    192759,
    192760,
    192761,
    192763,
    192764,
    192765,
    192766,
    192767,
    192768,
    192769,
    192770,
    192771,
    192772,
    192773,
    192774,
    192775,
    192776,
    192777,
    192779,
    192782,
    192783,
    192784,
    192785,
    192786,
    192787,
    192788,
    192789,
    192791,
    192792,
    192793,
    192794,
    192795,
    192796,
    192797,
    192798,
    192799,
    192800,
    192801,
    192802,
    192803,
    192804,
    192805,
    192808,
    192809,
    192811,
    192813,
    192815,
    192819,
    192820,
    192821,
    192823,
    192825,
    192827,
    192828,
    192829,
    192830,
    192831,
    192832,
    192833,
    192834,
    192835,
    192836,
    192837,
    192838,
    192839,
    192840,
    192841,
    192842,
    192843,
    192844,
    192845,
    192847,
    192848,
    192849,
    192850,
    192851,
    192852,
    192853,
    192854,
    192855,
    192856,
    192857,
    192858,
    192859,
    192860,
    192861,
    192862,
    192863,
    192864,
    192865,
    192866,
    192867,
    192868,
    192869,
    192870,
    192871,
    192872,
    192873,
    192874,
    192875,
    192876,
    192877,
    192878,
    192879,
    192880,
    192881,
    192882,
    192883,
    192885,
    192886,
    192887,
    192889,
    192890,
    192891,
    192893,
    192895,
    192896,
    192897,
    192898,
    192899,
    192903,
    192904
  ];
  public barcodeImgSrc: string = '';
  public searchEvent = new Subject<any>();
  public searchSubcription: Subscription = null;
  constructor(private sanitizer: DomSanitizer, private _notificationService: NotificationService, private _fileTrackingSystemService: FileTrackingSystemService, private _applicationFtsService: ApplicationFtsService, private _authenticationService: AuthenticationService) { }

  ngOnInit() {
    window.scroll(0, 0);
    this.kGrid.firstLoad = true;
    this.inputChange = new Subject();
    this.inputChange.pipe(debounceTime(300)).subscribe((query) => {
      this.searchQuery = query;
      if (this.searchQuery.length <= 2 && this.searchQuery.length != 0) {
        return;
      }
      this.getApplications();
    });
    this.initializeProps();
    this.loadDropDownValues();
    this.handleSearchEvents();
    this.getApplications();
  }
  private initializeProps() {
    let today = new Date();
    let dd: any = today.getDate(), mm: any = today.getMonth() + 1, yyyy = today.getFullYear();
    if (dd < 10) dd = '0' + dd; if (mm < 10) mm = '0' + mm;
    this.dateNow = dd + '/' + mm + '/' + yyyy;

    this.kGrid.loading = false;
    this.kGrid.pageSize = 50;
    this.kGrid.pageSizes = [50, 100, 200, 300, 500, 1000];
  }
  private loadDropDownValues() {
    this.getInboxOffices();
  }
  public handleSearchEvents() {
    this.searchSubcription = this.searchEvent.pipe(
      debounceTime(400)).subscribe((query: any) => {
        this.searchQuery = query;
        if (this.searchQuery.length <= 2 && this.searchQuery.length != 0) {
          return;
        }
        this.getApplications();
      });
  }
  private getInboxOffices() {
    this.selectedApplicationsIds = [];
    this.selectedApplications = [];
    this._fileTrackingSystemService.getOffices(true).subscribe((response: any) => {
      this.dropDowns.inboxOfficers = response;
      if (this.office_Id != 0) {
        let office = this.dropDowns.inboxOfficers.find(x => x.Id == this.office_Id);
        if (office) {
          this.dropdownValueChanged({ Id: office.Id, Name: office.Name }, 'office');
        } else {
          this.dropDowns.selectedFiltersModel.inboxOfficers = { Name: 'Select Office', Id: 0 };
          this.dropdownValueChanged(this.dropDowns.selectedFiltersModel.inboxOfficers, 'office');
        }
      } else {
        this.dropDowns.selectedFiltersModel.inboxOfficers = { Name: 'Select Office', Id: 0 };
        this.dropdownValueChanged(this.dropDowns.selectedFiltersModel.inboxOfficers, 'office');
      }
    },
      err => {
        this.handleError(err);
      });
  }
  private getApplications() {
    this.recieveFiles = false;
    this.kGrid.loading = true;
    //this.selectedApplicationsIndex = [];
    this._fileTrackingSystemService.getApplications(this.kGrid.skip, this.kGrid.pageSize, this.searchQuery, this.office_Id, true).subscribe(
      (response: any) => {
        console.log(response);

        if (response) {
          this.kGrid.data = [];
          this.kGrid.data = response.List;
          this.kGrid.dataOrigional = response.List;
          this.kGrid.totalRecords = response.Count;
          this.kGrid.gridView = { data: this.kGrid.data, total: this.kGrid.totalRecords };
        }
        this.kGrid.loading = false;
        this.kGrid.firstLoad = false;
        this.recieveFiles = true;
      },
      err => this.handleError(err)
    );
  }
  public generateSlip = () => {
    this.generatingSlip = true;
    this.openWindow();
  }
  public selectedKeysChange(selectedApplicationsIds: any) {
    this.selectedApplicationsIds = selectedApplicationsIds;
    /* let applicationsTemp = this.selectedApplications;
    this.selectedApplications = [];
    selectedApplicationsIds.forEach(id => {
      let application = this.kGrid.data.find(x => x.Id == id);
      if (application) {
        this.selectedApplications.push(application);
      }
    }); */
  }
  public saveFileMovement() {
    this.savingFileMovement = true;
    this._applicationFtsService.submitFileMovement(this.selectedApplicationsIds).subscribe((x: any) => {
      this.fileMoveMaster = x.fileMoveMaster;
      if (this.fileMoveMaster.Id) {
        this.barcodeImgSrc = x.barCode;
        this._notificationService.notify('success', this.selectedApplicationsIds.length + ' File' +
          (this.selectedApplicationsIds.length == 1 ? ' ' : 's ')
          + 'Recieved');
        if (!this.shouldPrint) {
          this.closeWindow();
        }
        this.savingFileMovement = false;
        /*  setTimeout(() => { */
        /* if (this.shouldPrint) {
          this.openSuccessDialog(); */
        //this.printApplication();
        /*    } else { */
        /*  this.dropDowns.selectedFiltersModel.inboxOfficers = { Name: 'Select Office', Id: 0 };
         this.dropdownValueChanged(this.dropDowns.selectedFiltersModel.inboxOfficers, 'office');
       */
        /*    } */
        /*   }, 300); */
        //this._firebaseHisduService.updateApplicationFirebase(this.selectedApplications[0].TrackingNumber);

      }
    },
      err => {
        this.handleError(err);
      });
  }
  public moveFilesFromJan22() {
    this.savingFileMovement = true;
    this._applicationFtsService.submitFileMovement(this.selectedAppIdsForMovement).subscribe((x: any) => {
      this.fileMoveMaster = x.fileMoveMaster;
      if (this.fileMoveMaster.Id) {
        this.barcodeImgSrc = x.barCode;
        this._notificationService.notify('success', this.selectedAppIdsForMovement.length + ' File' +
          (this.selectedAppIdsForMovement.length == 1 ? ' ' : 's ')
          + 'Recieved');
        if (!this.shouldPrint) {
          this.closeWindow();
        }
        this.savingFileMovement = false;
        /*  setTimeout(() => { */
        /* if (this.shouldPrint) {
          this.openSuccessDialog(); */
        //this.printApplication();
        /*    } else { */
        /*  this.dropDowns.selectedFiltersModel.inboxOfficers = { Name: 'Select Office', Id: 0 };
         this.dropdownValueChanged(this.dropDowns.selectedFiltersModel.inboxOfficers, 'office');
       */
        /*    } */
        /*   }, 300); */
        //this._firebaseHisduService.updateApplicationFirebase(this.selectedApplications[0].TrackingNumber);

      }
    },
      err => {
        this.handleError(err);
      });
  }
  public dropdownValueChanged = (value, filter) => {
    this.searchQuery = '';
    if (filter == 'office') {
      this.office_Id = value.Id;
      this.officeName = value.Name;
      this.getApplications();
    }
  }
  public pageChange(event: PageChangeEvent): void {
    this.kGrid.skip = event.skip;
    this.getApplications();
  }
  public changePagesize(value: any) {
    this.kGrid.pageSize = +value;
    this.kGrid.skip = 0;
    this.getApplications();
  }
  public closeWindow() {
    this.kGrid.loading = true;
    this.getInboxOffices();
    this.barcodeImgSrc = null;
    this.generatingSlip = false;
    this.acknowledgeDialogOpened = false;
  }
  public dialogAction(action: string) {
    if (action == 'yes') {
      this.saveFileMovement();
    } else {
      this.generatingSlip = false;
      this.closeWindow();
    }
  }
  public openWindow() {
    this.barcodeImgSrc = null;
    this.fileMoveMaster = null;
    this.getSelectedApplications();
  }
  public getSelectedApplications(): any {
    this._applicationFtsService.getSelectedApplications(this.selectedApplicationsIds).subscribe((x: any) => {
      if (x) {
        this.selectedApplications = x;
        this.acknowledgeDialogOpened = true;
      }
    },
      err => {
        this.handleError(err);
      });
  }
  public openSuccessDialog() {
    this.successDialogOpened = true;
  }
  public closeSuccessDialog() {
    this.successDialogOpened = false;
  }
  private handleError(err: any) {
    this.generatingSlip = false;
    this.savingFileMovement = false;
    this.kGrid.loading = false;
    if (err.status == 403) {
      this._authenticationService.logout();
    }
  }
  public dashifyCNIC(cnic: string) {
    if (!cnic) return '';
    return cnic[0] +
      cnic[1] +
      cnic[2] +
      cnic[3] +
      cnic[4] +
      '-' +
      cnic[5] +
      cnic[6] +
      cnic[7] +
      cnic[8] +
      cnic[9] +
      cnic[10] +
      cnic[11] +
      '-' +
      cnic[12];
  }
  public numberWithCommas(x) {
    if (x) {
      return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
  }
  public barcodeSrc() {
    return this.sanitizer.bypassSecurityTrustUrl(this.barcodeImgSrc);
  }
  printApplication() {
    let html = document.getElementById('formPrint').innerHTML;
    var mywindow = window.open('', 'PRINT', 'height=600,width=900');
    if (mywindow) {
      mywindow.document.write(`<html><head>
     
    <style>
   
    body {
      font-family: -apple-system,system-ui;
  }
  p {
    margin-top: 0;
    margin-bottom: 1rem !important;
}.mt-2 {
  margin-top: 0.5rem !important;
}.mb-0 {
  margin-bottom: 0 !important;
}
.ml-1 {
  margin-left: 0.25rem !important;
}
.mb-2 {
  margin-bottom: 0.5rem !important;
}
button.print {
  padding: 10px 40px;
  font-size: 21px;
  position: absolute;
  margin-left: 40%;
  background: #46a23f;
  background-image: linear-gradient(rgba(63, 162, 79, 0), rgba(63, 162, 79, 0.2));
  cursor: pointer;
  border: none;
  color: #ffffff;
  z-index: 9999;
}
@media print {
  button.print {
    display: none;
  }
}
    </style>
    <title>Application</title>`);
      mywindow.document.write('</head><body >');
      mywindow.document.write('<button onclick="printFunc()" class="print">Print</button>');
      mywindow.document.write(html);
      mywindow.document.write(`
      <script>
function printFunc() {
  window.print();
}
</script>
      `);
      mywindow.document.write('</body></html>');
      this.getInboxOffices();

      /*     mywindow.document.close(); // necessary for IE >= 10
          mywindow.focus(); // necessary for IE >= 10
          mywindow.print();
          mywindow.close(); */
    }
  }
  ngOnDestroy() {
    this.searchSubcription.unsubscribe();
  }
}
