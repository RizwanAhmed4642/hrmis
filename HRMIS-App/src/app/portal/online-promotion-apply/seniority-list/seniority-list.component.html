<div class="animated fadeIn">
  <!-- <div class="animated fadeIn row">
    <div class="col-md-12">
      <label class="k-form-field">
        <span class="p-strong">Search by Name or CNIC</span>
        <input kendoTextBox type="text" (keyup)="inputChange.next(true)" [(ngModel)]="filters.searchTerm">
      </label>
    </div>

  </div>
  <hr> -->
  <div class="row animated fadeIn" *ngIf="downloadClicked">
    <div class="col-md-10 offset-md-1 p-1">
      <p class="urdu-text font-3xl p-strong pull-right animated fadeIn">{{urdu.hdnama}}</p>
    </div>
  </div>
  <div class="row animated fadeIn" *ngIf="downloadClicked">
    <div class="col-md-10 offset-md-1 p-1">
      <p class="urdu-text font-2xl m-0 p-strong pull-right animated fadeIn p-1">{{urdu.desc3}}</p>
      <p class="urdu-text font-2xl m-0 p-strong pull-right animated fadeIn p-1">{{urdu.desc4}}</p>
      <p class="urdu-text font-2xl m-0 p-strong pull-right animated fadeIn p-1">{{urdu.desc5}}</p>
    </div>
  </div>
  <div class="row animated fadeIn" *ngIf="!downloadClicked">
    <div class="col-md-3">
      <img alt="Punjab Government Log" src="https://hrmis.pshealthpunjab.gov.pk/assets/img/brand/govlogoUpdated.png"
        style="display:inline-block; width:134px" />
    </div>
    <div class="col-md-3"></div>
    <div class="col-md-6">
      <div style="display:inline-block;text-align:center;">
        <p style="font-size: 18px;margin-right: 125px !important;"><strong class=" p-strong">No.
            SO(P)P&SH/3/17/2022<br />GOVERNMENT OF THE PUNJAB<br />PRIMARY
            &amp; SECONDARY HEALTHCARE DEPARTMENT </strong></p>
      </div>
    </div>
  </div>
  <hr *ngIf="!downloadClicked">
  <div class="row animated fadeIn" *ngIf="!downloadClicked">
    <div class="col-md-10 offset-md-1">
      <p class="text-center mb-0 p-strong" style="font-size: 18px;">TENTATIVE SENIORITY LIST FOR THE POST OF CONSULTANT
        DOCTORS (BS-18/Regular)</p>
    </div>
  </div>
  <hr *ngIf="!downloadClicked">


  <div class="row" *ngIf="!downloadClicked">
    <div class="col-md-5 mb-0 control-col-st">
      <label class="k-form-field">
        <span class="p-strong">Search by Name or CNIC</span>
        <input kendoTextBox type="text" (keyup)="inputChange.next(true)" [(ngModel)]="filters.searchTerm">
      </label>
    </div>
    <div class="col-md-4 control-col">
      <label class="k-form-field">
        <span class="p-strong animated fadeIn">Speciality</span>
        <kendo-dropdownlist [data]="dropDowns.adhocJobsData" [textField]="'Name'" [valueField]="'Id'"
          (valueChange)="dropdownValueChanged($event, 'designation')"
          [value]="dropDowns.selectedFiltersModel.designation" [defaultItem]="dropDowns.defultFiltersModel.designation">
        </kendo-dropdownlist>
      </label>
    </div>
    <div class="col-md-3 control-col-end animated fadeIn" *ngIf="!downloadClicked">
      <label class="k-form-field">
        <span class="p-strong">&nbsp;</span>
        <button kendoButton primary="true" (click)="downlaodSld()" class="btn-block"><i class="fa fa-download"></i>
          Download Seniority List</button>
      </label>
    </div>
    <div class="col-md-12 mt-0" style="max-height:70vh;overflow-y: auto;" *ngIf="!downloadClicked">

      <!--   <kendo-grid [data]="kGrid.data" style="height: 74vh; width: 100%;" [scrollable]="true" *ngIf="!loading">
        <kendo-grid-column field="asd" title="#" width="5" [headerClass]="'grid-header-text'"
          [style]="{'color': '#000', 'padding': '0px', 'border-bottom' : '1px solid rgba(0, 0, 0, 0.08)'}">
          <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
            <p class="p-non-hover f11">{{(rowIndex + 1)}}</p>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="SeniorityNumber" title="STY NO." width="10"
          [headerClass]="'grid-header-text text-center'"
          [style]="{'color': '#000', 'padding': '0px', 'border-bottom' : '1px solid rgba(0, 0, 0, 0.08)'}">
          <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
            <p class="text-center p-non-hover f11">{{dataItem.SeniorityNumber}}</p>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="EmployeeName" title="NAME OF DOCTOR" width="15" [headerClass]="'grid-header-text'"
          [style]="{'color': '#000', 'padding': '0px', 'border-bottom' : '1px solid rgba(0, 0, 0, 0.08)'}">
          <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
            <p class="p-non-hover f11">{{dataItem ? dataItem.EmployeeName : '-'}}
            </p>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="FatherName" title="S/D/W of" width="15" [headerClass]="'grid-header-text'"
          [style]="{'color': '#000', 'padding': '0px', 'border-bottom' : '1px solid rgba(0, 0, 0, 0.08)'}">
          <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
            <p class="p-non-hover f11">{{dataItem ? dataItem.FatherName : '-'}}
            </p>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="DateOfBirth" title="DATE OF BIRTH" width="10" [headerClass]="'grid-header-text'"
          [style]="{'color': '#000', 'padding': '0px', 'border-bottom' : '1px solid rgba(0, 0, 0, 0.08)'}">
          <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
            <p class="p-non-hover f11">{{dataItem ? (dataItem.DateOfBirth | date:'dd/MM/yyyy') : '-'}}
            </p>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="Domicile_Name" title="DOMICILE" width="10" [headerClass]="'grid-header-text'"
          [style]="{'color': '#000', 'padding': '0px', 'border-bottom' : '1px solid rgba(0, 0, 0, 0.08)'}">
          <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
            <p class="p-non-hover f11">{{dataItem ? dataItem.Domicile_Name : '-'}}
            </p>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="Designation_Name" title="SPECIALITY" width="10" [headerClass]="'grid-header-text'"
          [style]="{'color': '#000', 'padding': '0px', 'border-bottom' : '1px solid rgba(0, 0, 0, 0.08)'}">
          <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
            <p class="p-non-hover f11">{{dataItem ? dataItem.Designation_Name : '-'}}
            </p>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="HealthFacility" title="PRESENT PLACE OF POSTING" width="12"
          [headerClass]="'grid-header-text'"
          [style]="{'color': '#000', 'padding': '0px', 'border-bottom' : '1px solid rgba(0, 0, 0, 0.08)'}">
          <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
            <p class="p-non-hover f11"
              *ngIf="dataItem.HealthFacility && dataItem.HealthFacility != 'Primary and Secondary Healthcare Department'">
              {{dataItem.HealthFacility + ', ' + dataItem.Tehsil + ', ' + dataItem.District}}
            </p>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="ModeId" title="MODE WITH JOINING DATE" width="13" [headerClass]="'grid-header-text'"
          [style]="{'color': '#000', 'padding': '0px', 'border-bottom' : '1px solid rgba(0, 0, 0, 0.08)'}">
          <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">

            <p class="p-non-hover f11">
              <span
                class="p-strong">{{(dataItem && (dataItem.ModeId == 1 || dataItem.PromotionJoiningDate != null)) ? 'Promotion' : dataItem.ModeName}}</span>
            </p>
            <p class="p-non-hover f11"
              *ngIf="dataItem && (dataItem.ModeId == 1 || dataItem.PromotionJoiningDate != null)">
              Date of Promotion:
              {{dataItem.LastPromotionDate ? (dataItem.LastPromotionDate | date:'dd/MM/yyyy') : ''}}
            </p>
            <p class="p-non-hover f11"
              *ngIf="dataItem && (dataItem.ModeId == 1 || dataItem.PromotionJoiningDate != null)">
              Date of Joining after Promotion:
              {{dataItem.JoiningDate ? (dataItem.JoiningDate | date:'dd/MM/yyyy') : ''}}
            </p>
            <p class="p-non-hover f11"
              *ngIf="dataItem && (dataItem.ModeId == 2) && dataItem.PromotionJoiningDate == null">
              PPSC Merit Number: {{dataItem.PPSCMeritNumber ? (dataItem.PPSCMeritNumber) : ''}}
            </p>
            <p class="p-non-hover f11"
              *ngIf="dataItem && (dataItem.ModeId == 2 || dataItem.ModeId == 4 || dataItem.ModeId == 5 || dataItem.ModeId == 13) && dataItem.PromotionJoiningDate == null">
              Date of Regularization:
              {{dataItem.DateOfRegularization ? (dataItem.DateOfRegularization | date:'dd/MM/yyyy') : ''}}
            </p>
            <p class="p-non-hover f11"
              *ngIf="dataItem && (dataItem.ModeId == 2 || dataItem.ModeId == 4 || dataItem.ModeId == 5 || dataItem.ModeId == 13) && dataItem.PromotionJoiningDate == null">
              Date of Joining: {{dataItem.JoiningDate ? (dataItem.JoiningDate | date:'dd/MM/yyyy') : ''}}
            </p>
            <p class="p-non-hover f11"
              *ngIf="dataItem && (dataItem.ModeId == 3 || dataItem.ModeId == 6 || dataItem.ModeId == 11 || dataItem.ModeId == 12) && dataItem.PromotionJoiningDate == null">
              Contract Start Date:
              {{dataItem.ContractStartDate ? (dataItem.ContractStartDate | date:'dd/MM/yyyy') : ''}}
            </p>
            <p class="p-non-hover f11"
              *ngIf="dataItem && (dataItem.ModeId == 3 || dataItem.ModeId == 6 || dataItem.ModeId == 11 || dataItem.ModeId == 12)">
              Date of Regularization:
              {{dataItem.DateOfRegularization ? (dataItem.DateOfRegularization | date:'dd/MM/yyyy') : ''}}
            </p>
            <p class="p-non-hover f11"
              *ngIf="dataItem && (dataItem.ModeId == 3 || dataItem.ModeId == 6 || dataItem.ModeId == 11 || dataItem.ModeId == 12)">
              Date of Joining on Contract:
              {{dataItem.JoiningDate ? (dataItem.JoiningDate | date:'dd/MM/yyyy') : ''}}
            </p>
          </ng-template>
        </kendo-grid-column>
      </kendo-grid> -->
      <table style="width:100% !important;" *ngIf="!loading" cellpadding="0" cellspacing="0" id="sheet0"
        class="animated fadeIn sheet0 table-hover gridlines mt-2 f11">
        <thead>
          <tr class="row0">
            <td class="p-strong">STY NO.</td>
            <!-- <td class="p-strong">STY NO.</td> -->
            <td class="p-strong">NAME OF DOCTOR</td>
            <td class="p-strong">FATHER NAME</td>
            <td class="p-strong">DATE OF BIRTH</td>
            <td class="p-strong">DOMICILE</td>
            <td class="p-strong">SPECIALITY</td>
            <td class="p-strong">PRESENT PLACE OF POSTING</td>
            <td class="p-strong">MODE WITH JOINING DATE</td>
          </tr>
        </thead>
        <tbody>
          <tr class="row3" *ngFor="let dataItem of kGrid.data;let i=index;">
            <!-- (click)="openDialog(dataItem)"> -->
            <!--  (click)="viewApplicantMerit(dataItem)" -->
            <td>{{(i + 1)}}</td>
            <!-- <td>{{dataItem.SeniorityNumber}}</td> -->
            <!-- <td>{{dataItem.OldSeniorityNumber}}</td> -->
            <td>{{dataItem ? dataItem.EmployeeName : '-'}}</td>
            <td>{{dataItem ? dataItem.FatherName : '-'}}</td>
            <td>
              {{dataItem ? (dataItem.DateOfBirth | date:'dd/MM/yyyy') : '-'}}</td>
            <td>{{dataItem ? dataItem.Domicile_Name : '-'}}</td>
            <td>{{dataItem ? dataItem.Designation_Name : '-'}}</td>
            <td>
              <!-- <p class="m-0">
                {{dataItem.StatusName ? dataItem.StatusName : '-'}}
              </p> -->
              <p class="m-0"
                *ngIf="dataItem.HealthFacility && dataItem.HealthFacility != 'Primary and Secondary Healthcare Department'">
                {{dataItem.HealthFacility + ', ' + dataItem.Tehsil + ', ' + dataItem.District}}
              </p>
            </td>
            <td>
              <!-- [ngClass]="dataItem ? dataItem.ModeId == 1 ? 'text-danger' : dataItem.ModeId == 2 ? 'text-primary' : dataItem.ModeId == 3 ? 'text-success' : '' : ''" -->
              <p class="m-0">
                <span
                  class="p-strong">{{(dataItem && (dataItem.ModeId == 1 || dataItem.PromotionJoiningDate != null)) ? 'Promotion' : dataItem.ModeName}}</span>
              </p>
              <p class="m-0" *ngIf="dataItem && (dataItem.ModeId == 1 || dataItem.PromotionJoiningDate != null)">
                Date of Promotion:
                {{dataItem.LastPromotionDate ? (dataItem.LastPromotionDate | date:'dd/MM/yyyy') : ''}}
              </p>
              <p class="m-0" *ngIf="dataItem && (dataItem.ModeId == 1 || dataItem.PromotionJoiningDate != null)">
                Date of Joining after Promotion:
                {{dataItem.JoiningDate ? (dataItem.JoiningDate | date:'dd/MM/yyyy') : ''}}
              </p>
              <p class="m-0" *ngIf="dataItem && (dataItem.ModeId == 2) && dataItem.PromotionJoiningDate == null">
                PPSC Merit Number: {{dataItem.PPSCMeritNumber ? (dataItem.PPSCMeritNumber) : ''}}
              </p>
              <p class="m-0"
                *ngIf="dataItem && (dataItem.ModeId == 2 || dataItem.ModeId == 4 || dataItem.ModeId == 5 || dataItem.ModeId == 13) && dataItem.PromotionJoiningDate == null">
                Date of Regularization:
                {{dataItem.DateOfRegularization ? (dataItem.DateOfRegularization | date:'dd/MM/yyyy') : ''}}
              </p>
              <p class="m-0"
                *ngIf="dataItem && (dataItem.ModeId == 2 || dataItem.ModeId == 4 || dataItem.ModeId == 5 || dataItem.ModeId == 13) && dataItem.PromotionJoiningDate == null">
                Date of Joining: {{dataItem.JoiningDate ? (dataItem.JoiningDate | date:'dd/MM/yyyy') : ''}}
              </p>
              <p class="m-0"
                *ngIf="dataItem && (dataItem.ModeId == 3 || dataItem.ModeId == 6 || dataItem.ModeId == 11 || dataItem.ModeId == 12) && dataItem.PromotionJoiningDate == null">
                Contract Start Date:
                {{dataItem.ContractStartDate ? (dataItem.ContractStartDate | date:'dd/MM/yyyy') : ''}}
              </p>
              <p class="m-0"
                *ngIf="dataItem && (dataItem.ModeId == 3 || dataItem.ModeId == 6 || dataItem.ModeId == 11 || dataItem.ModeId == 12)">
                Date of Regularization:
                {{dataItem.DateOfRegularization ? (dataItem.DateOfRegularization | date:'dd/MM/yyyy') : ''}}
              </p>
              <p class="m-0"
                *ngIf="dataItem && (dataItem.ModeId == 3 || dataItem.ModeId == 6 || dataItem.ModeId == 11 || dataItem.ModeId == 12)">
                Date of Joining on Contract:
                {{dataItem.JoiningDate ? (dataItem.JoiningDate | date:'dd/MM/yyyy') : ''}}
              </p>
            </td>
          </tr>
        </tbody>
      </table>

      <div *ngIf="loading" style="width: 100%;font-size: 24px;" class="shine p-1 mt-4 text-center text-muted">Fetching
        Seniority List</div>
    </div>

  </div>
  <hr>
  <div class="row" *ngIf="!downloadClicked">
    <div class="col-md-3">
      <button kendoButton primary="true" (click)="downloadClicked = true" class="btn-block">Proceed</button>
    </div>
  </div>
  <div class="row animated fadeIn" *ngIf="!loading && downloadClicked">
    <div class="col-md-4 control-col-st">
      <label class="k-form-field">
        <span class="p-strong">&nbsp;</span>
        <button kendoButton primary="true" routerLink="/promotion-apply/profile/1" class="btn-block btn-lg"
          look="outline"><i class="fa fa-check-square-o"></i> My
          Record is Correct</button>
      </label>
    </div>
    <div class="col-md-4 control-col">
      <label class="k-form-field">
        <span class="p-strong">&nbsp;</span>
        <button kendoButton primary="true" routerLink="/promotion-apply/profile/2" class="btn-block btn-lg"
          look="outline"><i class="fa fa-times-rectangle-o"></i> My
          Record is Incorrect</button>
      </label>
    </div>
    <div class="col-md-4 control-col-end">
      <label class="k-form-field">
        <span class="p-strong">&nbsp;</span>
        <button kendoButton primary="true" routerLink="/promotion-apply/profile/3" class="btn-block btn-lg"
          look="outline"><i class="fa fa-plus-square-o"></i> My
          Name is Missing</button>
      </label>
    </div>
  </div>